"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.whoAmIHandler = ({ events, routes, }) => (ctx) => {
    var _a, _b;
    ctx.requestHandlerName = 'builtin:whoami';
    (_b = (_a = ctx.tracing) === null || _a === void 0 ? void 0 : _a.currentSpan) === null || _b === void 0 ? void 0 : _b.setOperationName(ctx.requestHandlerName);
    ctx.status = 200;
    ctx.body = {
        events,
        routes,
    };
    ctx.set('Cache-Control', 'public, max-age=86400'); // cache for 24 hours
};
exports.healthcheckHandler = ({ events, routes, }) => (ctx) => {
    var _a, _b;
    ctx.requestHandlerName = 'builtin:healthcheck';
    (_b = (_a = ctx.tracing) === null || _a === void 0 ? void 0 : _a.currentSpan) === null || _b === void 0 ? void 0 : _b.setOperationName(ctx.requestHandlerName);
    ctx.status = 200;
    ctx.body = {
        events,
        routes,
    };
};
exports.metricsLoggerHandler = (ctx) => {
    var _a, _b;
    ctx.requestHandlerName = 'builtin:metrics-logger';
    (_b = (_a = ctx.tracing) === null || _a === void 0 ? void 0 : _a.currentSpan) === null || _b === void 0 ? void 0 : _b.setOperationName(ctx.requestHandlerName);
    ctx.status = 200;
    ctx.body = ctx.metricsLogger.getSummaries();
};
